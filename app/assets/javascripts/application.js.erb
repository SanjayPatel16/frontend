//= require require_config

if(MAS.supports.fonts && MAS.bootstrap.fontsUrl) {

  require(['webfonts'], function () {
    'use strict';

    var fontConfig = {
      custom: {
        families: ['museo_sans', 'icon-font'],
        urls: [MAS.bootstrap.fontsUrl]
      }
    };
    WebFont.load(fontConfig);
  });
}

require(['scrollTracking'], function (scrollTracking) {
  'use strict';

  scrollTracking({
    el: '.editorial',
    triggerPoints: [0.25, 0.5, 0.75, 1]
  });
});


require(['collapsable'], function (Collapsable) {
  'use strict';

  // Primary Nav
  new Collapsable({
    name: 'primaryNav',
    closeOffFocus:true,
    accordion:true,
    triggerEl: '#primary-nav > li > a',
    targetEl: '.primary-nav__dropdown',
    parentWrapper: '#primary-nav'
  });

  // Mobile Nav
  new Collapsable({
    name: 'mobileNav',
    accordion:true,
    triggerEl: '.mobile-nav a',
    targetType: 'href',
    parentWrapper: '#primary-nav'
  });

  // Article Collapsables
  new Collapsable({
    name: 'articleCollapsables',
    showOnlyFirst:true,
    showIcon: true,
    useButton: true
  });

  MAS.subscribe('collapsable:articleCollapsables', function(event,o){
    console.info(o);
  });

});

require(['jquery', 'ujs'], function($){
  'use strict';

  $('.js-cookie-message').bind('ajax:success', function() {
    $('.cookie-message').hide();
    $('.footer-site-links__cookie-message').removeClass('is-on');
  });

  $('.js-close-opt-out').bind('ajax:success', function() {
    $('.opt-out').addClass('is-hidden');
  });
});

